<table class="w-full bg-inherit" mat-table [dataSource]="dataSource" cdkDropList cdkDropListOrientation="horizontal"
    (cdkDropListDropped)="moveColumn($event)">

    <ng-content></ng-content>

    <!-- ID -->
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header></th>
        <td mat-cell *matCellDef="let shipment" [attr.data-label]="''">
        </td>
    </ng-container>

    <!-- Created at -->
    <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>Date</th>
        <td mat-cell *matCellDef="let shipment" [attr.data-label]="'Date'">
            {{ shipment.createdAt * 1000 | date:'shortDate' }}
        </td>
    </ng-container>

    <!-- Numero -->
    <ng-container matColumnDef="number">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>&numero; BE</th>
        <td mat-cell *matCellDef="let shipment" [attr.data-label]="'BE'">
            {{ shipment.number }}
        </td>
    </ng-container>

    <!-- From -->
    <ng-container matColumnDef="from.city.name">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>Prov.</th>
        <td mat-cell *matCellDef="let shipment" [attr.data-label]="'Prov.'">
            {{ shipment.from.city.name }}
        </td>
    </ng-container>

    <!-- To -->
    <ng-container matColumnDef="to.city.name">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>Dest.</th>
        <td mat-cell *matCellDef="let shipment" [attr.data-label]="'Dest.'">
            {{ shipment.to.city.name }}
        </td>
    </ng-container>

    <!-- Packages count -->
    <ng-container matColumnDef="packagesCount">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header class="mat-sort-header-right">Colis</th>
        <td mat-cell *matCellDef="let shipment" [attr.data-label]="'Colis'" class="text-right">
            {{ shipment.packagesCount | number }}
        </td>
    </ng-container>

    <!-- Total price -->
    <ng-container matColumnDef="totalPrice">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header class="mat-sort-header-right">Montant HT</th>
        <td mat-cell *matCellDef="let shipment" [attr.data-label]="'Montant HT'" class="text-right">
            {{ shipment.totalPrice | currency }}
        </td>
    </ng-container>

    <!-- Row shown when there is no matching data that will be provided to the wrapper table. -->
    <tr class="mat-row" *matNoDataRow>
        <td class="p-4 text-center mat-cell" [attr.colspan]="columns.length">
            @if (loading) {
            @defer (when loading) {
            <mat-progress-spinner [diameter]="40" [mode]="'indeterminate'" class="mx-auto"></mat-progress-spinner>
            }
            }
            @else {
            Empty list
            }
        </td>
    </tr>

</table>
