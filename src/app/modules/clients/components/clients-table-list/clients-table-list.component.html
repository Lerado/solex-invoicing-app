<table class="w-full bg-inherit" mat-table [dataSource]="dataSource()" cdkDropList cdkDropListOrientation="horizontal"
    (cdkDropListDropped)="moveColumn($event)">

    <ng-content></ng-content>

    <!-- ID -->
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header></th>
        <td mat-cell *matCellDef="let client" [attr.data-label]="''">
        </td>
    </ng-container>

    <!-- Created at -->
    <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>Date</th>
        <td mat-cell *matCellDef="let client" [attr.data-label]="'Date'">
            {{ client.createdAt | date:'shortDate' }}
        </td>
    </ng-container>

    <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>Prénom</th>
        <td mat-cell *matCellDef="let client" [attr.data-label]="'Prénom'">
            {{ client.firstName }}
        </td>
    </ng-container>

    <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>Nom</th>
        <td mat-cell *matCellDef="let client" [attr.data-label]="'Nom'">
            {{ client.lastName }}
        </td>
    </ng-container>

    <ng-container matColumnDef="contact">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>Contact</th>
        <td mat-cell *matCellDef="let client" [attr.data-label]="'Contact'">
            {{ client.contact | phone }}
        </td>
    </ng-container>

    <ng-container matColumnDef="address">
        <th mat-header-cell *matHeaderCellDef cdkDrag mat-sort-header>Adresse</th>
        <td mat-cell *matCellDef="let client" [attr.data-label]="'Adresse'">
            {{ client.address }}
        </td>
    </ng-container>

    <!-- Row shown when there is no matching data that will be provided to the wrapper table. -->
    <tr class="mat-row" *matNoDataRow>
        <td class="p-4 text-center mat-cell" [attr.colspan]="columns().length">
            @if (loading()) {
            @defer (when loading()) {
            <mat-progress-spinner [diameter]="40" [mode]="'indeterminate'" class="mx-auto"></mat-progress-spinner>
            }
            }
            @else {
            Liste vide
            }
        </td>
    </tr>

</table>
